/*!CK:2457985464!*//*1455136145,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["du7f6"]); }

__d('PagesComposerPostButton.react',['ReactComposerActions','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerAttachmentStore','ReactComposerNUXActions','ReactComposerNUXStore','ReactComposerPhotoCarouselStore','ReactComposerPhotoCarouselUtils','ReactComposerPhotoStore','ReactComposerPhotoUploadStore','ReactComposerPostButtonContainer.react','ReactComposerPostUtils','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSlideshowStore','ReactComposerSlideshowUtils','ReactComposerStore','ReactComposerVideoUploadStore','ComposerNUXType','DOM','PagesComposerPostButtonUtils','ReactComponentWithPureRenderMixin','React','ReactDOM','ContextualDialogArrow','Image.react','PagesComposerActions','PopoverMenu.react','PagePostActionButtonActionTypes','PostBackdateDialog.react','PostScheduleAndPostEndDialog.react','ReactLayeredComponentMixin','TooltipMixin','XUIAmbientNUX.react','XUIButton.react','XUIButtonGroup.react','ReactXUIMenu','cx','emptyFunction','fbt','invariant','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa){if(c.__markCompiled)c.__markCompiled();var xa=ra.Item,ya=da.createClass({displayName:'ComponentWithTooltipMixin',mixins:[na],render:function(){return da.Children.only(this.props.children);}}),za=da.createClass({displayName:'PagesComposerPostButton',mixins:[k,ca,ma,u(l,n,o,q,r,v,x,y)],propTypes:{config:j.isRequired},statics:{calculateState:function(ab,bb,cb){var db=bb.config.attachmentsConfig[i.MEDIA],eb=null;if(o.isPhotoCarouselSelected(ab)&&p.isPagePostButtonDisabled(ab)){if(o.shouldShowURLEditArea(ab)){eb=ua._("Gib eine URL ein, um mit der Erstellung deines Fotokarussells zu beginnen.");}else if(!o.isCarouselPreviewCompleted(ab))eb=ua._("Du ben\u00f6tigst mindestens 2 Bilder und eine URL, um dein Fotokarussell zu ver\u00f6ffentlichen.");}else if(v.isSlideshowSelected(ab)&&w.isPagePostButtonDisabled(ab))if(w.hasTooFewSlides(ab)){eb=ua._({"*":"Du ben\u00f6tigst mindestens {Minimum number of images} Fotos, um eine Slideshow zu ver\u00f6ffentlichen"},[ua.param('Minimum number of images',db.slideshowConfig.minPhotoNum,[0])]);}else if(w.hasTooManySlides(ab))eb=ua._({"*":"Du kannst maximal {Maximum number of images} Fotos hinzuf\u00fcgen, um eine Slideshow zu ver\u00f6ffentlichen"},[ua.param('Maximum number of images',db.slideshowConfig.maxPhotoNum,[0])]);var fb=null;if(v.isSlideshowSelected(ab)&&bb.config.nuxConfig.shouldShowSlideshowNux&&!n.hasNUXBeenSeen(ab,z.SLIDESHOW_NUX))fb={content:ua._("Wenn du deinen Beitrag ver\u00f6ffentlichst, wird eine Slideshow erstellt, die wie ein Video abgespielt wird."),onClose:function(){return m.nuxWasSeen(ab,z.SLIDESHOW_NUX);}};return {disabled:ba.isPagePostButtonDisabled(ab,db.photoLimit),disabledDropdown:ba.isPageDropdownButtonDisabled(ab),nuxConfig:fb,tooltips:eb};}},componentWillMount:function(){!this.props.config.postButtonConfig?va(0):undefined;},renderLayers:function(){return {nux:da.createElement(oa,{alignment:'right',contextRef:(function(){return this.refs.button;}).bind(this),onCloseButtonClick:this.state.nuxConfig?this.state.nuxConfig.onClose:null,position:'above',shown:!!this.state.nuxConfig},this.state.nuxConfig?this.state.nuxConfig.content:null)};},render:function(){var ab=this.props.config.postButtonConfig.postActionsConfig;return (da.createElement(ya,{tooltip:this.state.tooltips},da.createElement(qa,null,da.createElement(s,{forceDisabled:this.state.disabled,label:this._getLabel(ab.defaultAction),config:this.props.config,onClickPreprocess:this._onClickPreprocess,ref:'button'}),this._shouldShowDropdownMenu()?da.createElement(ia,{className:"_lde",menu:this._renderMenu(),alignh:'right',alignv:'middle',layerBehaviors:[fa],position:'below'},da.createElement(pa,{disabled:this.state.disabledDropdown,imageRight:da.createElement(ga,{src:wa('/images/ui/x/button/dark/chevron.png')}),size:'medium',use:'confirm'})):null)));},_onClickPreprocess:function(){switch(this.props.config.postButtonConfig.postActionsConfig.defaultAction){case ja.SCHEDULE:this._onScheduleClicked();return false;case ja.SAVE_DRAFT:this._onDraftClicked();return false;case ja.ADS_POST:this._onAdsPostClicked();return false;case ja.PUBLISH:this._onPublishClicked();return false;}return true;},_shouldShowDropdownMenu:function(){var ab=this.props.config.postButtonConfig.postActionsConfig.otherActions;return this.context.actorID===this.context.targetID&&ab&&ab.length&&this.state.selectedAttachment!==i.QUESTION&&this.state.selectedAttachment!==i.QANDA;},_renderMenu:function(){return (da.createElement(ra,null,this.props.config.postButtonConfig.postActionsConfig.otherActions.map((function(ab){return (da.createElement(xa,{key:ab,onclick:this._onClickHandler(ab)},this._getLabel(ab)));}).bind(this))));},_getLabel:function(ab){if(this.context.actorID!==this.context.targetID)return ua._("Posten");switch(ab){case ja.SCHEDULE:return ua._("Planen");case ja.BACKDATE:return ua._("Zur\u00fcckdatieren");case ja.SAVE_DRAFT:return ua._("Entwurf speichern");case ja.PUBLISH:return ua._("Ver\u00f6ffentlichen");case ja.ADS_POST:return ua._("Unver\u00f6ffentlichten Beitrag speichern");}va(0);},_onClickHandler:function(ab){switch(ab){case ja.SCHEDULE:return this._onScheduleClicked;case ja.BACKDATE:return this._onBackdateClicked;case ja.SAVE_DRAFT:return this._onDraftClicked;case ja.PUBLISH:return this._onPublishClicked;}va(0);},_onScheduleClicked:function(){var ab=this.props.config.postButtonConfig,bb=ea.render(da.createElement(la,{timezoneStr:ab.timezoneString,onSubmit:this._onScheduledTimeSelected,defaultScheduledTimeDelta:ab.defaultScheduledTimeDelta}),aa.create('div'));!(bb instanceof la)?va(0):undefined;bb.show();},_onScheduledTimeSelected:function(ab,bb){ha.schedule(this.context.composerID,ab,bb);this._onClick();},_onDraftClicked:function(){ha.setDraft(this.context.composerID);this._onClick();},_onAdsPostClicked:function(){ha.setAdsPost(this.context.composerID);this._onClick();},_onPublishClicked:function(){this._onClick();},_onBackdateClicked:function(){var ab=this.props.config.postButtonConfig,bb=ea.render(da.createElement(ka,{maxTime:Date.now()/1000,minTime:ab.minBackdateTime,onSubmit:this._onBackdateTimeSelected}),aa.create('div'));!(bb instanceof ka)?va(0):undefined;bb.show();},_onBackdateTimeSelected:function(ab,bb,cb,db){ha.backdate(this.context.composerID,ab,bb,cb,db);this._onClick();},_onClick:function(){h.postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID,onPostSuccess:v.isSlideshowSelected(this.context.composerID)?w.onPostSuccess:ta});}});f.exports=za;},null);